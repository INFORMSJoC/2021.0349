Import('env')

########################################################################
#
#  preparation of experimental results for tables and plots
#

fileToFlag = {
    'all_agg.csv'      : '--failures',
    'success_only.csv' : '--successes',
    'saturated.csv'    : '--saturated'
}

for outFile, flag in fileToFlag.items():
    csv = env.Command(
        outFile, ('compile-results.csv', 'make-figures.py'),
        'python3 make-figures.py %s' % flag, chdir=True,
    )
    Alias('csv', csv)


pivoted_failures = env.Command(
    'pivoted-failures.csv',
    ('pivoted-failures.py', 'all_agg.csv', 'c-applications.csv'),
    'python3 $SOURCE >$TARGET',
)
Alias('csv', pivoted_failures)


pivoted_times = env.Command(
    'pivoted-times.csv',
    ('pivoted-times.py', 'saturated.csv', 'c-applications.csv'),
    'python3 $SOURCE >$TARGET',
)
Alias('csv', pivoted_times)
